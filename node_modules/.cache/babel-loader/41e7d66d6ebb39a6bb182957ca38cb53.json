{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport axios from 'axios';\nexport const useMutation = (path, callback) => {\n  _s();\n\n  const [processing, setProcesing] = useState(false);\n  const [success, setSuccess] = useState();\n  const [error, setError] = useState();\n  const url = `${process.env.REACT_APP_API}/${path}`;\n\n  const wrap = fn => {\n    return async record => {\n      setProcessing(true);\n      setSuccess(undefined);\n      setError(undefined);\n      fn(record).then(() => {\n        setSuccess(true);\n\n        if (callback) {\n          callback();\n        }\n      }).catch(error => {\n        setSuccess(false);\n        setError(error);\n      }).finally(() => {\n        setProcessing(false);\n      });\n    };\n  };\n\n  const create = wrap(async record => {\n    await axios.post(url, record);\n  });\n  const update = wrap(async record => {\n    await axios.post(`${url}/${record.id}`, record);\n  });\n  const remove = wrap(async record => {\n    await axios.delete(`${url}/${record.id}`);\n  });\n  return {\n    create,\n    update,\n    remove,\n    processing,\n    success,\n    error,\n    setError\n  };\n};\n\n_s(useMutation, \"JCIngl8SvIREMvFh60T/gOrqFMQ=\");","map":{"version":3,"sources":["C:/Users/User/Desktop/Crud-com-React--Typescript-e-React/src/hooks/useMutation.ts"],"names":["useState","axios","useMutation","path","callback","processing","setProcesing","success","setSuccess","error","setError","url","process","env","REACT_APP_API","wrap","fn","record","setProcessing","undefined","then","catch","finally","create","post","update","id","remove","delete"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAgC,OAAhC;AAKA,OAAO,MAAMC,WAAW,GAAG,CACvBC,IADuB,EAEvBC,QAFuB,KAGnB;AAAA;;AAEA,QAAM,CAACC,UAAD,EAAaC,YAAb,IAA6BN,QAAQ,CAAU,KAAV,CAA3C;AACA,QAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,EAAtC;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,EAAlC;AAEA,QAAMW,GAAG,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,aAAc,IAAGX,IAAK,EAAjD;;AAEJ,QAAMY,IAAI,GAAIC,EAAD,IAAmB;AAC5B,WAAO,MAAOC,MAAP,IAAoB;AACvBC,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAV,MAAAA,UAAU,CAACW,SAAD,CAAV;AACAT,MAAAA,QAAQ,CAACS,SAAD,CAAR;AACAH,MAAAA,EAAE,CAACC,MAAD,CAAF,CACKG,IADL,CACU,MAAM;AACRZ,QAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,YAAIJ,QAAJ,EAAc;AACVA,UAAAA,QAAQ;AACX;AACJ,OANL,EAOKiB,KAPL,CAOYZ,KAAD,IAAgB;AACnBD,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,QAAAA,QAAQ,CAACD,KAAD,CAAR;AACH,OAVL,EAWKa,OAXL,CAWa,MAAM;AACXJ,QAAAA,aAAa,CAAC,KAAD,CAAb;AACH,OAbL;AAcH,KAlBD;AAmBH,GApBD;;AAsBA,QAAMK,MAAiB,GAAGR,IAAI,CAAC,MAAOE,MAAP,IAAoB;AAC/C,UAAMhB,KAAK,CAACuB,IAAN,CAAWb,GAAX,EAAeM,MAAf,CAAN;AACH,GAF6B,CAA9B;AAIA,QAAMQ,MAAiB,GAAGV,IAAI,CAAC,MAAOE,MAAP,IAAoB;AAC/C,UAAMhB,KAAK,CAACuB,IAAN,CAAY,GAAEb,GAAI,IAAGM,MAAM,CAACS,EAAG,EAA/B,EAAkCT,MAAlC,CAAN;AACH,GAF6B,CAA9B;AAIA,QAAMU,MAAiB,GAAGZ,IAAI,CAAC,MAAOE,MAAP,IAAoB;AAC/C,UAAMhB,KAAK,CAAC2B,MAAN,CAAc,GAAEjB,GAAI,IAAGM,MAAM,CAACS,EAAG,EAAjC,CAAN;AACH,GAF6B,CAA9B;AAIA,SAAO;AACHH,IAAAA,MADG;AAEHE,IAAAA,MAFG;AAGHE,IAAAA,MAHG;AAIHtB,IAAAA,UAJG;AAKHE,IAAAA,OALG;AAMHE,IAAAA,KANG;AAOHC,IAAAA;AAPG,GAAP;AAUH,CAvDM;;GAAMR,W","sourcesContent":["import { useState } from 'react';\r\nimport axios, {AxiosError} from 'axios';\r\nimport { Record } from '../interfaces/RecordEntities';\r\n\r\nexport type Action<T> = (record:T)=> Promise<void>;\r\n\r\nexport const useMutation = <T extends Record>(\r\n    path: string,\r\n    callback?: Function\r\n    )=> {\r\n\r\n        const [processing, setProcesing] = useState<boolean>(false);\r\n        const [success, setSuccess] = useState<boolean>();\r\n        const [error, setError] = useState<AxiosError>();\r\n      \r\n        const url = `${process.env.REACT_APP_API}/${path}`;\r\n\r\n    const wrap = (fn: Action<T>) => {\r\n        return async (record:T) => {\r\n            setProcessing(true)\r\n            setSuccess(undefined)\r\n            setError(undefined)\r\n            fn(record)\r\n                .then(() => {\r\n                    setSuccess(true);\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                })\r\n                .catch((error:Error)=> {\r\n                    setSuccess(false);\r\n                    setError(error as AxiosError);\r\n                })\r\n                .finally(() => {\r\n                    setProcessing(false)\r\n                });\r\n        };\r\n    };\r\n\r\n    const create: Action<T> = wrap(async (record:T) => {\r\n        await axios.post(url,record);\r\n    });\r\n\r\n    const update: Action<T> = wrap(async (record:T) => {\r\n        await axios.post(`${url}/${record.id}`, record);\r\n    });\r\n\r\n    const remove: Action<T> = wrap(async (record:T) => {\r\n        await axios.delete(`${url}/${record.id}`);\r\n    });\r\n\r\n    return {\r\n        create,\r\n        update,\r\n        remove,\r\n        processing,\r\n        success,\r\n        error,\r\n        setError,\r\n    };\r\n\r\n}"]},"metadata":{},"sourceType":"module"}